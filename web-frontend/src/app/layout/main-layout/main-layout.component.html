<div class="main-container">
  <!-- Toolbar поверх карты -->
  <mat-toolbar color="primary" class="top-toolbar">
    <span>ЛЭП Management System</span>
    <span class="spacer"></span>
    <button mat-icon-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
    </button>
    <mat-menu #userMenu="matMenu" xPosition="before">
      <button mat-menu-item (click)="logout()">
        <mat-icon>logout</mat-icon>
        <span>Выйти</span>
      </button>
    </mat-menu>
  </mat-toolbar>

  <!-- Карта на весь экран -->
  <div class="map-wrapper" [style.--sidebar-width.px]="sidebarWidth">
    <router-outlet></router-outlet>
  </div>

  <!-- Sidebar поверх карты слева -->
  <div class="sidebar-overlay" [style.width.px]="sidebarWidth" [class.hidden]="!sidebarVisible">
    <div class="resize-handle" (mousedown)="startResize($event)"></div>
    <app-sidebar></app-sidebar>
  </div>
  
  <!-- Кнопка для показа/скрытия sidebar -->
  <button mat-fab class="sidebar-toggle" 
          (click)="toggleSidebar()" 
          [class.sidebar-open]="sidebarVisible"
          [style.left.px]="sidebarVisible ? sidebarWidth + 16 : 16">
    <mat-icon>{{ sidebarVisible ? 'chevron_left' : 'chevron_right' }}</mat-icon>
  </button>
</div>
